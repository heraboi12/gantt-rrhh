<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gantt RRHH - Cronograma de Convocatorias</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo, useCallback } = React;
        const { Calendar, Users, Clock, Plus, AlertTriangle, Edit2, Trash2, Info, Search, Filter, Download, Eye, EyeOff } = lucideReact;

        // 🎨 Paleta de colores expandida
        const COLORS = [
            "bg-blue-500 hover:bg-blue-600",
            "bg-green-500 hover:bg-green-600", 
            "bg-purple-500 hover:bg-purple-600",
            "bg-pink-500 hover:bg-pink-600",
            "bg-indigo-500 hover:bg-indigo-600",
            "bg-yellow-500 hover:bg-yellow-600",
            "bg-red-500 hover:bg-red-600",
            "bg-teal-500 hover:bg-teal-600"
        ];

        const normalizeDate = (date) => {
            const d = new Date(date);
            d.setHours(0, 0, 0, 0);
            return d;
        };

        // 📌 Input reutilizable mejorado
        const InputField = ({ label, type = "text", value, onChange, placeholder, error, required }) => (
            React.createElement("div", null,
                React.createElement("label", { className: "block text-sm font-medium text-gray-700 mb-1" },
                    label, " ", required && React.createElement("span", { className: "text-red-500" }, "*")
                ),
                React.createElement("input", {
                    type: type,
                    value: value,
                    onChange: onChange,
                    placeholder: placeholder,
                    className: `w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 transition-colors ${
                        error ? 'border-red-500 bg-red-50' : 'border-gray-300'
                    }`
                }),
                error && React.createElement("p", { className: "text-red-500 text-xs mt-1" }, error)
            )
        );

        // 🔍 Componente de búsqueda
        const SearchFilter = ({ searchTerm, setSearchTerm, filterStatus, setFilterStatus }) => (
            React.createElement("div", { className: "flex flex-col sm:flex-row gap-4 mb-6 p-4 bg-gray-50 rounded-lg" },
                React.createElement("div", { className: "flex-1 relative" },
                    React.createElement(Search, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400", size: 16 }),
                    React.createElement("input", {
                        type: "text",
                        placeholder: "Buscar por posición o entrevistador...",
                        value: searchTerm,
                        onChange: (e) => setSearchTerm(e.target.value),
                        className: "w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                    })
                ),
                React.createElement("div", { className: "flex items-center gap-2" },
                    React.createElement(Filter, { size: 16, className: "text-gray-500" }),
                    React.createElement("select", {
                        value: filterStatus,
                        onChange: (e) => setFilterStatus(e.target.value),
                        className: "border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"
                    },
                        React.createElement("option", { value: "all" }, "Todas"),
                        React.createElement("option", { value: "upcoming" }, "Próximas"),
                        React.createElement("option", { value: "active" }, "En curso"),
                        React.createElement("option", { value: "past" }, "Finalizadas")
                    )
                )
            )
        );

        const GanttRRHH = () => {
            const [convocatorias, setConvocatorias] = useState([
                {
                    id: 1,
                    posicion: "Analista Senior Marketing",
                    fechaCierre: "2024-12-20",
                    fechaInicioEntrevistas: "2024-12-25",
                    fechaFinEntrevistas: "2024-12-28",
                    entrevistadores: ["María García", "Carlos López"],
                    estado: "upcoming"
                },
                {
                    id: 2,
                    posicion: "Desarrollador Full Stack",
                    fechaCierre: "2024-12-22",
                    fechaInicioEntrevistas: "2024-12-27",
                    fechaFinEntrevistas: "2025-01-02",
                    entrevistadores: ["Ana Martínez", "Roberto Silva"],
                    estado: "upcoming"
                },
                {
                    id: 3,
                    posicion: "Coordinador de Ventas",
                    fechaCierre: "2024-12-18",
                    fechaInicioEntrevistas: "2024-12-26",
                    fechaFinEntrevistas: "2024-12-30",
                    entrevistadores: ["Luis Fernández"],
                    estado: "upcoming"
                }
            ]);

            const [mostrarFormulario, setMostrarFormulario] = useState(false);
            const [editando, setEditando] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');
            const [filterStatus, setFilterStatus] = useState('all');
            const [vistaCompacta, setVistaCompacta] = useState(false);
            const [errores, setErrores] = useState({});
            const [confirmacionEliminar, setConfirmacionEliminar] = useState(null);
            const [nuevaConvocatoria, setNuevaConvocatoria] = useState({
                posicion: '',
                fechaCierre: '',
                fechaInicioEntrevistas: '',
                fechaFinEntrevistas: '',
                entrevistadores: ''
            });

            // Validaciones mejoradas
            const validarConvocatoria = useCallback((data) => {
                const errores = {};
                
                if (!data.posicion.trim()) errores.posicion = 'La posición es requerida';
                if (!data.fechaCierre) errores.fechaCierre = 'La fecha de cierre es requerida';
                if (!data.fechaInicioEntrevistas) errores.fechaInicioEntrevistas = 'La fecha de inicio es requerida';
                if (!data.fechaFinEntrevistas) errores.fechaFinEntrevistas = 'La fecha de fin es requerida';
                if (!data.entrevistadores.trim()) errores.entrevistadores = 'Al menos un entrevistador es requerido';

                // Validar lógica de fechas
                if (data.fechaCierre && data.fechaInicioEntrevistas) {
                    const cierre = new Date(data.fechaCierre);
                    const inicio = new Date(data.fechaInicioEntrevistas);
                    if (cierre > inicio) {
                        errores.fechaInicioEntrevistas = 'Las entrevistas deben iniciar después del cierre';
                    }
                }

                if (data.fechaInicioEntrevistas && data.fechaFinEntrevistas) {
                    const inicio = new Date(data.fechaInicioEntrevistas);
                    const fin = new Date(data.fechaFinEntrevistas);
                    if (inicio > fin) {
                        errores.fechaFinEntrevistas = 'La fecha de fin debe ser posterior al inicio';
                    }
                }

                // Validar duplicados (solo si no estamos editando)
                if (!editando) {
                    const existe = convocatorias.some(c => 
                        c.posicion.toLowerCase().trim() === data.posicion.toLowerCase().trim()
                    );
                    if (existe) errores.posicion = 'Ya existe una convocatoria para esta posición';
                }

                return errores;
            }, [convocatorias, editando]);

            // Filtrar convocatorias
            const convocatoriasFiltradas = useMemo(() => {
                const hoy = normalizeDate(new Date());
                
                return convocatorias.filter(conv => {
                    // Filtro de búsqueda
                    const matchSearch = conv.posicion.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    conv.entrevistadores.some(ent => 
                                        ent.toLowerCase().includes(searchTerm.toLowerCase())
                                    );

                    // Filtro de estado
                    const inicioEntrevistas = normalizeDate(conv.fechaInicioEntrevistas);
                    const finEntrevistas = normalizeDate(conv.fechaFinEntrevistas);
                    
                    let matchStatus = true;
                    if (filterStatus === 'upcoming') {
                        matchStatus = inicioEntrevistas > hoy;
                    } else if (filterStatus === 'active') {
                        matchStatus = inicioEntrevistas <= hoy && finEntrevistas >= hoy;
                    } else if (filterStatus === 'past') {
                        matchStatus = finEntrevistas < hoy;
                    }

                    return matchSearch && matchStatus;
                });
            }, [convocatorias, searchTerm, filterStatus]);

            // Calcular rango de fechas
            const fechasExtremas = useMemo(() => {
                if (convocatoriasFiltradas.length === 0) return { min: new Date(), max: new Date() };

                const todasLasFechas = convocatoriasFiltradas.flatMap(conv => [
                    normalizeDate(conv.fechaCierre),
                    normalizeDate(conv.fechaInicioEntrevistas),
                    normalizeDate(conv.fechaFinEntrevistas)
                ]);

                const min = new Date(Math.min(...todasLasFechas));
                const max = new Date(Math.max(...todasLasFechas));
                min.setDate(min.getDate() - 3);
                max.setDate(max.getDate() + 7);

                return { min, max };
            }, [convocatoriasFiltradas]);

            // Días laborables en el rango
            const diasCalendario = useMemo(() => {
                const dias = [];
                for (let d = new Date(fechasExtremas.min); d <= fechasExtremas.max; d.setDate(d.getDate() + 1)) {
                    const day = d.getDay();
                    if (day >= 1 && day <= 5) dias.push(new Date(d));
                }
                return dias;
            }, [fechasExtremas]);

            // Mapa de fechas → índice en el calendario
            const fechaIndice = useMemo(() => {
                const map = {};
                diasCalendario.forEach((dia, i) => {
                    map[normalizeDate(dia).getTime()] = i;
                });
                return map;
            }, [diasCalendario]);

            // Cruces de fechas
            const cruces = useMemo(() => {
                const conflictos = [];
                for (let i = 0; i < convocatoriasFiltradas.length; i++) {
                    for (let j = i + 1; j < convocatoriasFiltradas.length; j++) {
                        const conv1 = convocatoriasFiltradas[i];
                        const conv2 = convocatoriasFiltradas[j];

                        const inicio1 = normalizeDate(conv1.fechaInicioEntrevistas);
                        const fin1 = normalizeDate(conv1.fechaFinEntrevistas);
                        const inicio2 = normalizeDate(conv2.fechaInicioEntrevistas);
                        const fin2 = normalizeDate(conv2.fechaFinEntrevistas);

                        if (inicio1 <= fin2 && inicio2 <= fin1) {
                            // Verificar si comparten entrevistadores
                            const entrevistadoresComunes = conv1.entrevistadores.filter(ent1 =>
                                conv2.entrevistadores.some(ent2 => 
                                    ent1.toLowerCase() === ent2.toLowerCase()
                                )
                            );

                            conflictos.push({
                                conv1: conv1.posicion,
                                conv2: conv2.posicion,
                                entrevistadoresComunes,
                                esConflictoReal: entrevistadoresComunes.length > 0
                            });
                        }
                    }
                }
                return conflictos;
            }, [convocatoriasFiltradas]);

            // Posición de barra mejorada
            const calcularPosicionBarra = useCallback((fechaInicio, fechaFin) => {
                const inicioIndex = fechaIndice[normalizeDate(fechaInicio).getTime()] ?? 0;
                const finIndex = fechaIndice[normalizeDate(fechaFin).getTime()] ?? diasCalendario.length - 1;
                const total = Math.max(diasCalendario.length, 1);

                return {
                    left: `${(inicioIndex / total) * 100}%`,
                    width: `${Math.max(((finIndex - inicioIndex + 1) / total) * 100, 2)}%`
                };
            }, [fechaIndice, diasCalendario.length]);

            const resetFormulario = () => {
                setNuevaConvocatoria({
                    posicion: '',
                    fechaCierre: '',
                    fechaInicioEntrevistas: '',
                    fechaFinEntrevistas: '',
                    entrevistadores: ''
                });
                setErrores({});
                setMostrarFormulario(false);
                setEditando(null);
            };

            // CRUD mejorado
            const agregarConvocatoria = () => {
                const erroresValidacion = validarConvocatoria(nuevaConvocatoria);
                setErrores(erroresValidacion);

                if (Object.keys(erroresValidacion).length > 0) {
                    return;
                }

                const entrevistadoresArray = nuevaConvocatoria.entrevistadores
                    .split(',')
                    .map(e => e.trim())
                    .filter(Boolean);

                const nuevaConv = {
                    ...nuevaConvocatoria,
                    id: editando ? editando.id : Date.now(),
                    entrevistadores: entrevistadoresArray,
                    estado: 'upcoming'
                };

                if (editando) {
                    setConvocatorias(convs => convs.map(c => c.id === editando.id ? nuevaConv : c));
                } else {
                    setConvocatorias(convs => [...convs, nuevaConv]);
                }

                resetFormulario();
            };

            const editarConvocatoria = (conv) => {
                setEditando(conv);
                setNuevaConvocatoria({
                    posicion: conv.posicion,
                    fechaCierre: conv.fechaCierre,
                    fechaInicioEntrevistas: conv.fechaInicioEntrevistas,
                    fechaFinEntrevistas: conv.fechaFinEntrevistas,
                    entrevistadores: conv.entrevistadores.join(', ')
                });
                setErrores({});
                setMostrarFormulario(true);
            };

            const solicitarEliminar = (conv) => {
                setConfirmacionEliminar(conv);
            };

            const confirmarEliminar = () => {
                if (!confirmacionEliminar) return;
                
                const id = confirmacionEliminar.id;
                
                setConvocatorias(convs => convs.filter(c => c.id !== id));
                
                // Si estamos editando la convocatoria que se va a eliminar, cerramos el formulario
                if (editando && editando.id === id) {
                    resetFormulario();
                }
                
                setConfirmacionEliminar(null);
            };

            const cancelarEliminar = () => {
                setConfirmacionEliminar(null);
            };

            const exportarDatos = () => {
                if (convocatoriasFiltradas.length === 0) return;
                
                const datos = convocatoriasFiltradas.map(conv => ({
                    Posicion: conv.posicion,
                    FechaCierre: conv.fechaCierre,
                    InicioEntrevistas: conv.fechaInicioEntrevistas,
                    FinEntrevistas: conv.fechaFinEntrevistas,
                    Entrevistadores: conv.entrevistadores.join('; ')
                }));

                const csv = [
                    Object.keys(datos[0]).join(','),
                    ...datos.map(row => Object.values(row).join(','))
                ].join('\n');

                const blob = new Blob([csv], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `convocatorias-${new Date().toISOString().split('T')[0]}.csv`;
                a.click();
                window.URL.revokeObjectURL(url);
            };

            const formatearFecha = (fecha) =>
                new Date(fecha + 'T00:00:00').toLocaleDateString('es-ES', { day: '2-digit', month: 'short' });

            const obtenerEstadoConvocatoria = (conv) => {
                const hoy = normalizeDate(new Date());
                const inicio = normalizeDate(conv.fechaInicioEntrevistas);
                const fin = normalizeDate(conv.fechaFinEntrevistas);

                if (fin < hoy) return { texto: 'Finalizada', color: 'text-gray-500' };
                if (inicio <= hoy && fin >= hoy) return { texto: 'En curso', color: 'text-green-600' };
                return { texto: 'Próxima', color: 'text-blue-600' };
            };

            return React.createElement("div", { className: "p-4 max-w-7xl mx-auto bg-white min-h-screen" },
                // Header
                React.createElement("div", { className: "mb-6" },
                    React.createElement("div", { className: "flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4" },
                        React.createElement("div", null,
                            React.createElement("h1", { className: "text-2xl sm:text-3xl font-bold text-gray-800 mb-2 flex items-center gap-3" },
                                React.createElement(Calendar, { className: "text-blue-600" }),
                                "Cronograma de Convocatorias - RRHH"
                            ),
                            React.createElement("p", { className: "text-gray-600" }, "Gestiona y visualiza entrevistas de trabajo")
                        ),
                        React.createElement("div", { className: "flex gap-2 mt-4 sm:mt-0" },
                            React.createElement("button", {
                                onClick: () => setVistaCompacta(!vistaCompacta),
                                className: "p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",
                                title: vistaCompacta ? 'Vista normal' : 'Vista compacta'
                            }, React.createElement(vistaCompacta ? Eye : EyeOff, { size: 20 })),
                            React.createElement("button", {
                                onClick: exportarDatos,
                                className: "p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",
                                title: "Exportar CSV",
                                disabled: convocatoriasFiltradas.length === 0
                            }, React.createElement(Download, { size: 20 }))
                        )
                    ),
                    React.createElement(SearchFilter, {
                        searchTerm,
                        setSearchTerm,
                        filterStatus,
                        setFilterStatus
                    })
                ),

                // Conflictos
                cruces.length > 0 && React.createElement("div", { className: "mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg" },
                    React.createElement("div", { className: "flex items-center mb-2" },
                        React.createElement(AlertTriangle, { className: "text-red-500 mr-2", size: 20 }),
                        React.createElement("h3", { className: "text-red-800 font-semibold" },
                            `¡Atención! Conflictos detectados (${cruces.filter(c => c.esConflictoReal).length} críticos)`
                        )
                    ),
                    ...cruces.map((c, i) =>
                        React.createElement("div", {
                            key: i,
                            className: `text-sm p-2 rounded ${c.esConflictoReal ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`
                        },
                            React.createElement("strong", null, c.conv1), " y ", React.createElement("strong", null, c.conv2),
                            c.esConflictoReal && React.createElement("span", { className: "ml-2 text-xs" },
                                `(Entrevistadores comunes: ${c.entrevistadoresComunes.join(', ')})`
                            )
                        )
                    )
                ),

                // Botón nueva convocatoria
                React.createElement("div", { className: "mb-6" },
                    React.createElement("button", {
                        onClick: () => {
                            setEditando(null);
                            setNuevaConvocatoria({
                                posicion: '',
                                fechaCierre: '',
                                fechaInicioEntrevistas: '',
                                fechaFinEntrevistas: '',
                                entrevistadores: ''
                            });
                            setErrores({});
                            setMostrarFormulario(true);
                        },
                        className: "bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors"
                    },
                        React.createElement(Plus, { size: 20 }),
                        "Nueva Convocatoria"
                    )
                ),

                // Formulario
                mostrarFormulario && React.createElement("div", { className: "mb-6 bg-gray-50 p-6 rounded-lg border shadow-sm" },
                    React.createElement("h3", { className: "text-xl font-semibold mb-4" },
                        editando ? 'Editar Convocatoria' : 'Nueva Convocatoria'
                    ),
                    React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                        React.createElement(InputField, {
                            label: "Posición",
                            value: nuevaConvocatoria.posicion,
                            onChange: (e) => setNuevaConvocatoria({ ...nuevaConvocatoria, posicion: e.target.value }),
                            placeholder: "ej. Analista Senior Marketing",
                            error: errores.posicion,
                            required: true
                        }),
                        React.createElement(InputField, {
                            type: "date",
                            label: "Fecha de Cierre",
                            value: nuevaConvocatoria.fechaCierre,
                            onChange: (e) => setNuevaConvocatoria({ ...nuevaConvocatoria, fechaCierre: e.target.value }),
                            error: errores.fechaCierre,
                            required: true
                        }),
                        React.createElement(InputField, {
                            type: "date",
                            label: "Inicio Entrevistas",
                            value: nuevaConvocatoria.fechaInicioEntrevistas,
                            onChange: (e) => setNuevaConvocatoria({ ...nuevaConvocatoria, fechaInicioEntrevistas: e.target.value }),
                            error: errores.fechaInicioEntrevistas,
                            required: true
                        }),
                        React.createElement(InputField, {
                            type: "date",
                            label: "Fin Entrevistas",
                            value: nuevaConvocatoria.fechaFinEntrevistas,
                            onChange: (e) => setNuevaConvocatoria({ ...nuevaConvocatoria, fechaFinEntrevistas: e.target.value }),
                            error: errores.fechaFinEntrevistas,
                            required: true
                        }),
                        React.createElement("div", { className: "md:col-span-2" },
                            React.createElement(InputField, {
                                label: "Entrevistadores",
                                value: nuevaConvocatoria.entrevistadores,
                                onChange: (e) => setNuevaConvocatoria({ ...nuevaConvocatoria, entrevistadores: e.target.value }),
                                placeholder: "ej. María García, Carlos López, Ana Martínez",
                                error: errores.entrevistadores,
                                required: true
                            })
                        )
                    ),
                    React.createElement("div", { className: "mt-6 flex gap-2" },
                        React.createElement("button", {
                            onClick: agregarConvocatoria,
                            className: "bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-colors"
                        }, editando ? 'Actualizar' : 'Agregar'),
                        React.createElement("button", {
                            onClick: resetFormulario,
                            className: "bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition-colors"
                        }, "Cancelar")
                    )
                ),

                // Modal de confirmación
                confirmacionEliminar && React.createElement("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" },
                    React.createElement("div", { className: "bg-white p-6 rounded-lg shadow-lg max-w-md mx-4" },
                        React.createElement("h3", { className: "text-lg font-semibold text-gray-800 mb-4" }, "Confirmar eliminación"),
                        React.createElement("p", { className: "text-gray-600 mb-6" },
                            "¿Estás seguro de que deseas eliminar la convocatoria ",
                            React.createElement("strong", null, `"${confirmacionEliminar.posicion}"`),
                            "? Esta acción no se puede deshacer."
                        ),
                        React.createElement("div", { className: "flex gap-3 justify-end" },
                            React.createElement("button", {
                                onClick: cancelarEliminar,
                                className: "px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg transition-colors"
                            }, "Cancelar"),
                            React.createElement("button", {
                                onClick: confirmarEliminar,
                                className: "px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors"
                            }, "Eliminar")
                        )
                    )
                ),

                // Gantt Chart
                React.createElement("div", { className: "bg-white border rounded-lg overflow-hidden shadow-sm" },
                    // Header del Gantt
                    React.createElement("div", { className: "bg-gray-100 border-b" },
                        React.createElement("div", { className: "flex" },
                            React.createElement("div", { className: `${vistaCompacta ? 'w-64' : 'w-80'} p-4 border-r bg-gray-50` },
                                React.createElement("h3", { className: "font-semibold text-gray-700" },
                                    `Convocatoria (${convocatoriasFiltradas.length})`
                                )
                            ),
                            React.createElement("div", { className: "flex-1 overflow-x-auto" },
                                React.createElement("div", { className: `flex ${vistaCompacta ? 'h-12' : 'h-16'} items-center min-w-max` },
                                    ...diasCalendario.map((dia, i) => {
                                        const esHoy = normalizeDate(dia).getTime() === normalizeDate(new Date()).getTime();
                                        return React.createElement("div", {
                                            key: i,
                                            className: `flex-1 min-w-8 text-center border-l border-gray-200 text-xs ${
                                                esHoy ? 'bg-blue-100 font-bold' : ''
                                            }`
                                        },
                                            React.createElement("div", { className: vistaCompacta ? 'text-xs' : 'font-medium' },
                                                dia.getDate()
                                            ),
                                            !vistaCompacta && React.createElement("div", { className: "text-gray-500" },
                                                dia.toLocaleDateString('es-ES', { month: 'short' })
                                            )
                                        );
                                    })
                                )
                            )
                        )
                    ),

                    // Filas del Gantt
                    React.createElement("div", { className: "divide-y divide-gray-200" },
                        convocatoriasFiltradas.length === 0 ? 
                            React.createElement("div", { className: "p-8 text-center text-gray-500" },
                                searchTerm || filterStatus !== 'all' 
                                    ? 'No se encontraron convocatorias con los filtros aplicados'
                                    : 'No hay convocatorias registradas. ¡Agrega la primera!'
                            ) :
                            convocatoriasFiltradas.map((conv, i) => {
                                const estado = obtenerEstadoConvocatoria(conv);
                                return React.createElement("div", { key: conv.id, className: "flex hover:bg-gray-50 transition-colors" },
                                    React.createElement("div", { className: `${vistaCompacta ? 'w-64' : 'w-80'} p-4 border-r` },
                                        React.createElement("div", { className: "flex items-start justify-between mb-2" },
                                            React.createElement("h4", { className: `font-semibold text-gray-800 ${vistaCompacta ? 'text-xs' : 'text-sm'} mb-1` },
                                                conv.posicion
                                            ),
                                            React.createElement("span", { className: `text-xs px-2 py-1 rounded-full ${estado.color} bg-gray-100` },
                                                estado.texto
                                            )
                                        ),
                                        
                                        !vistaCompacta && React.createElement("div", { className: "text-xs text-gray-600 mb-2 space-y-1" },
                                            React.createElement("div", { className: "flex items-center gap-1" },
                                                React.createElement(Clock, { size: 12 }),
                                                `Cierre: ${formatearFecha(conv.fechaCierre)}`
                                            ),
                                            React.createElement("div", { className: "flex items-center gap-1" },
                                                React.createElement(Users, { size: 12 }),
                                                conv.entrevistadores.join(', ')
                                            )
                                        ),
                                        
                                        React.createElement("div", { className: "flex gap-1" },
                                            React.createElement("button", {
                                                onClick: () => editarConvocatoria(conv),
                                                className: "p-1 text-blue-600 hover:bg-blue-100 rounded transition-colors",
                                                title: "Editar"
                                            }, React.createElement(Edit2, { size: 14 })),
                                            React.createElement("button", {
                                                onClick: () => solicitarEliminar(conv),
                                                className: "p-1 text-red-600 hover:bg-red-100 rounded transition-colors",
                                                title: "Eliminar"
                                            }, React.createElement(Trash2, { size: 14 }))
                                        )
                                    ),

                                    React.createElement("div", { className: "flex-1 relative p-2 overflow-x-auto" },
                                        React.createElement("div", { className: "relative h-8 min-w-max" },
                                            React.createElement("div", {
                                                className: `absolute ${vistaCompacta ? 'h-4' : 'h-6'} ${COLORS[i % COLORS.length]} rounded-lg flex items-center justify-center text-white text-xs font-medium shadow-sm transition-all hover:shadow-md cursor-pointer`,
                                                style: calcularPosicionBarra(conv.fechaInicioEntrevistas, conv.fechaFinEntrevistas),
                                                title: `${conv.posicion}\nEntrevistas: ${formatearFecha(conv.fechaInicioEntrevistas)} - ${formatearFecha(conv.fechaFinEntrevistas)}\nEntrevistadores: ${conv.entrevistadores.join(', ')}`
                                            },
                                                !vistaCompacta && 'Entrevistas'
                                            )
                                        )
                                    )
                                );
                            })
                    ),

                    // Leyenda
                    React.createElement("div", { className: "bg-gray-50 p-4 border-t flex flex-wrap items-center gap-4 text-sm" },
                        React.createElement("div", { className: "flex items-center gap-2" },
                            React.createElement(Info, { size: 16, className: "text-blue-500" }),
                            React.createElement("span", null, "Período de Entrevistas (días hábiles)")
                        ),
                        React.createElement("div", { className: "flex items-center gap-2" },
                            React.createElement(AlertTriangle, { size: 16, className: "text-red-500" }),
                            React.createElement("span", null, "Conflictos por entrevistadores comunes")
                        ),
                        React.createElement("div", { className: "flex items-center gap-2" },
                            React.createElement("div", { className: "w-3 h-3 bg-blue-100 rounded" }),
                            React.createElement("span", null, "Día actual")
                        )
                    )
                ),

                // Resumen
                React.createElement("div", { className: "mt-6 grid grid-cols-1 md:grid-cols-4 gap-4" },
                    React.createElement("div", { className: "bg-blue-50 p-4 rounded-lg border border-blue-200" },
                        React.createElement("h3", { className: "font-semibold text-blue-800 mb-2" }, "Total Convocatorias"),
                        React.createElement("p", { className: "text-2xl font-bold text-blue-600" }, convocatoriasFiltradas.length),
                        React.createElement("p", { className: "text-xs text-blue-600 mt-1" }, `de ${convocatorias.length} totales`)
                    ),
                    React.createElement("div", { className: "bg-red-50 p-4 rounded-lg border border-red-200" },
                        React.createElement("h3", { className: "font-semibold text-red-800 mb-2" }, "Conflictos Críticos"),
                        React.createElement("p", { className: "text-2xl font-bold text-red-600" }, cruces.filter(c => c.esConflictoReal).length),
                        React.createElement("p", { className: "text-xs text-red-600 mt-1" }, `de ${cruces.length} totales`)
                    ),
                    React.createElement("div", { className: "bg-green-50 p-4 rounded-lg border border-green-200" },
                        React.createElement("h3", { className: "font-semibold text-green-800 mb-2" }, "Próximas Entrevistas"),
                        React.createElement("p", { className: "text-2xl font-bold text-green-600" },
                            convocatoriasFiltradas.filter(c => normalizeDate(c.fechaInicioEntrevistas) >= normalizeDate(new Date())).length
                        ),
                        React.createElement("p", { className: "text-xs text-green-600 mt-1" }, "por iniciar")
                    ),
                    React.createElement("div", { className: "bg-purple-50 p-4 rounded-lg border border-purple-200" },
                        React.createElement("h3", { className: "font-semibold text-purple-800 mb-2" }, "En Curso"),
                        React.createElement("p", { className: "text-2xl font-bold text-purple-600" },
                            convocatoriasFiltradas.filter(c => {
                                const hoy = normalizeDate(new Date());
                                const inicio = normalizeDate(c.fechaInicioEntrevistas);
                                const fin = normalizeDate(c.fechaFinEntrevistas);
                                return inicio <= hoy && fin >= hoy;
                            }).length
                        ),
                        React.createElement("p", { className: "text-xs text-purple-600 mt-1" }, "activas hoy")
                    )
                )
            );
        };

        // Renderizar la aplicación
        ReactDOM.render(React.createElement(GanttRRHH), document.getElementById('root'));
    </script>
</body>
</html>
